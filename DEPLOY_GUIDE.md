# üöÄ –ì–∏–¥ –ø–æ –¥–µ–ø–ª–æ—é Aero Lunch

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±:
```bash
# 1. –î–µ–ª–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
# 2. –ö–æ–º–º–∏—Ç–∏–º –∏ –ø—É—à–∏–º
git add -A
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main

# 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è GitHub Actions
# 4. Webhook –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ GitHub Actions —Å–æ–±–∏—Ä–∞–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç webhook –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- ‚úÖ `git pull origin main` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ `npm run build` –≤ –ø–∞–ø–∫–µ server
- ‚úÖ `pm2 restart aero-lunch-backend`

## –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å)

### SSH –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É:
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh -i ~/.ssh/aero_lunch_key ubuntu@158.160.177.251

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /home/ubuntu/aero-lunch-app

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
git pull origin main

# –°–±–æ—Ä–∫–∞ backend
cd server
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
PORT=3002 nohup node src/server.ts > backend.log 2>&1 &
```

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π webhook:
```bash
# –ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
curl -X POST -H "Content-Type: application/json" \
     -d '{"ref":"refs/heads/main","action":"deploy"}' \
     "https://aero-lunch.ru/api/webhook"
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–∏–¥–æ–∫
curl -X POST -H "Content-Type: application/json" \
     -d '{"items":[{"id":1,"title":"–¢–µ—Å—Ç","price":1000,"quantity":1}],"deliveryType":"TAKEAWAY"}' \
     "https://aero-lunch.ru/api/orders/test"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:
- –û—Ç–∫—Ä—ã—Ç—å https://aero-lunch.ru
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
- –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh -i ~/.ssh/aero_lunch_key ubuntu@158.160.177.251 "ps aux | grep node"
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
ssh -i ~/.ssh/aero_lunch_key ubuntu@158.160.177.251 "cd /home/ubuntu/aero-lunch-app/server && tail -f backend.log"
```

### –°—Ç–∞—Ç—É—Å GitHub Actions:
https://github.com/Andrey198802/aero-lunch-app/actions

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å

### 1. GitHub Actions –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å: https://github.com/Andrey198802/aero-lunch-app/actions
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

### 2. Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
- –í—ã–∑–≤–∞—Ç—å webhook –≤—Ä—É—á–Ω—É—é

### 3. –°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ SSH
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã: `ps aux | grep node`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

### 4. –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ git push –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ webhook —Å—Ä–∞–±–æ—Ç–∞–ª
- –°–¥–µ–ª–∞—Ç—å git pull –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—Ä—É—á–Ω—É—é

## –ö–æ–Ω—Ç–∞–∫—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞

- **IP**: 158.160.177.251
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: ubuntu
- **SSH –∫–ª—é—á**: ~/.ssh/aero_lunch_key
- **–ü–∞–ø–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞**: /home/ubuntu/aero-lunch-app
- **–ü–æ—Ä—Ç backend**: 3002
- **–ü–æ—Ä—Ç frontend**: 3000 