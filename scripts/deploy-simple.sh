#!/bin/bash

# –ü—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ –Ω—É–∂–Ω–æ–π –ø–∞–ø–∫–µ
if [ ! -f "package.json" ]; then
    echo "‚ùå –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞"
    exit 1
fi

# –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
echo "üì¶ –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç..."
npm run build

# –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
echo "üì§ –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä..."
echo ""
echo "‚ö†Ô∏è  –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞:"
echo ""
read -p "–í–≤–µ–¥–∏—Ç–µ IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞: " SERVER_IP
read -p "–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–±—ã—á–Ω–æ ubuntu): " SERVER_USER
read -p "–í–≤–µ–¥–∏—Ç–µ –ø—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä /home/ubuntu/aero-lunch): " SERVER_PATH

# –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ SCP
echo ""
echo "üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª—ã..."
scp -r dist/* $SERVER_USER@$SERVER_IP:$SERVER_PATH/dist/

echo ""
echo "‚úÖ –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã!"
echo ""
echo "üì± –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ –∞–¥—Ä–µ—Å—É:"
echo "   http://$SERVER_IP"
echo ""
echo "üéâ –ì–æ—Ç–æ–≤–æ!" 